(function(){"use strict";var e={821:function(e,t,s){var i=s(9242),r=s(3396);function o(e,t,s,i,o,l){const n=(0,r.up)("MainView"),a=(0,r.up)("Preloader");return e.isLoaded?((0,r.wg)(),(0,r.j4)(n,{key:0})):((0,r.wg)(),(0,r.j4)(a,{key:1}))}var l=s(2482),n=s(6520);const a=e=>((0,r.dD)("data-v-2a5f2866"),e=e(),(0,r.Cn)(),e),c={class:"main-view"},d={class:"adding-product-area"},h=a((()=>(0,r._)("div",{class:"header"}," Добавление товара ",-1))),u={class:"products-area"},p={class:"header"},m={class:"products-catalog-wrapper"},g={class:"products-catalog",ref:"scroll_wrapper_ref"};function v(e,t,s,o,l,n){const a=(0,r.up)("AddNewProductComponent"),v=(0,r.up)("SortSelectComponent"),f=(0,r.up)("ProductCard"),b=(0,r.up)("ScrollbarComponent");return(0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("div",d,[h,(0,r.Wm)(a,{onClicked:e.addNewCard},null,8,["onClicked"])]),(0,r._)("div",u,[(0,r._)("div",p,[(0,r.Wm)(v,{itemsList:e.sortTypes,itemsStates:e.sortStates,onChangeSort:e.changeSortType},null,8,["itemsList","itemsStates","onChangeSort"])]),(0,r._)("div",m,[(0,r._)("div",g,[(0,r.Wm)(i.W3,{name:"list"},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.products,(t=>((0,r.wg)(),(0,r.j4)(f,{ref_for:!0,ref:`card_ref_${t.id}`,key:t.id,card:t,onRemoveClicked:e.removeCard},null,8,["card","onRemoveClicked"])))),128))])),_:1})],512),e.scroll_wrapper_ref?((0,r.wg)(),(0,r.j4)(b,{key:0,"scroll-element":e.scroll_wrapper_ref},null,8,["scroll-element"])):(0,r.kq)("",!0)])])])}const f={class:"add-new-product-component"};function b(e,t,s,i,o,l){const n=(0,r.up)("InputDataComponent"),a=(0,r.up)("ButtonComponent");return(0,r.wg)(),(0,r.iD)("div",f,[(0,r.Wm)(n,{index:0,onChanged:e.changed,title:"Наименование товара",textFieldPlaceholder:"Введите наименование товара",text:e.textFieldsData[0],isError:e.isFieldsError[0],isDataRequired:""},null,8,["onChanged","text","isError"]),(0,r.Wm)(n,{index:1,onChanged:e.changed,title:"Описание товара",textFieldPlaceholder:"Введите описание товара",text:e.textFieldsData[1],isTextFieldMultiline:""},null,8,["onChanged","text"]),(0,r.Wm)(n,{index:2,onChanged:e.changed,title:"Ссылка на изображение товара",textFieldPlaceholder:"Введите ссылку",text:e.textFieldsData[2],isError:e.isFieldsError[2],isDataRequired:""},null,8,["onChanged","text","isError"]),(0,r.Wm)(n,{index:3,title:"Цена товара",onChanged:e.changed,textFieldPlaceholder:"Введите цену",text:e.textFieldsData[3],isError:e.isFieldsError[3],isPrice:"",isDataRequired:""},null,8,["onChanged","text","isError"]),(0,r.Wm)(a,{title:"Добавить товар",isActive:e.isConfirmButtonActive,onClick:e.clicked},null,8,["isActive","onClick"])])}var w=s(7139);const E={class:"input-data-component"},y={class:"title"},x={key:0,class:"requiring-marker"},C={key:0,class:"error"};function k(e,t,s,i,o,l){const n=(0,r.up)("InputFieldComponent");return(0,r.wg)(),(0,r.iD)("div",E,[(0,r._)("div",y,[(0,r.Uk)((0,w.zw)(e.title)+" ",1),e.isDataRequired?((0,r.wg)(),(0,r.iD)("div",x)):(0,r.kq)("",!0)]),(0,r.Wm)(n,{isTextFieldMultiline:e.isTextFieldMultiline,placeholder:e.textFieldPlaceholder,isPrice:e.isPrice,text:e.text,onChanged:e.changed},null,8,["isTextFieldMultiline","placeholder","isPrice","text","onChanged"]),e.isError?((0,r.wg)(),(0,r.iD)("div",C," Поле является обязательным ")):(0,r.kq)("",!0)])}const F={class:"input-field-component"},_=["value","placeholder"],D=["value","placeholder"];function M(e,t,s,i,o,l){return(0,r.wg)(),(0,r.iD)("div",F,[e.isTextFieldMultiline?((0,r.wg)(),(0,r.iD)("textarea",{key:1,class:"input-field-multiline",value:e.text,onInput:t[1]||(t[1]=(...t)=>e.change&&e.change(...t)),placeholder:e.placeholder},"\r\n    ",40,D)):((0,r.wg)(),(0,r.iD)("input",{key:0,class:"input-field",value:e.text,onInput:t[0]||(t[0]=(...t)=>e.change&&e.change(...t)),placeholder:e.placeholder},null,40,_))])}function S(e){let t=e.toString().replace(/ /g,"").replace(/(\d)(?=(\d{3})+(\D|$))/g,"$1 ");return t}var B,I;let T=(B=(0,n.Ei)({components:{},props:{text:{type:String,default:""},isTextFieldMultiline:{type:Boolean,default:!1},placeholder:{type:String,default:""},isPrice:{type:Boolean,default:!1}},emits:["changed"],watch:{}}),B(I=class extends n.w3{constructor(...e){super(...e),(0,l.Z)(this,"currentText","")}input(e){console.log("E",e)}change(e){this.$props.isPrice?("0"===e.target.value[0]&&(e.target.value=e.target.value.slice(-(e.target.value.length-1))),this.currentText=S(e.target.value)):this.currentText=e.target.value,console.log(this.currentText),this.$emit("changed",this.currentText)}get style(){let e;return e=this.$props.isTextFieldMultiline?1:.5,{"--flex":e}}})||I);var A=s(89);const H=(0,A.Z)(T,[["render",M],["__scopeId","data-v-114ee90e"]]);var P,Z,L=H;let q=(P=(0,n.Ei)({components:{InputFieldComponent:L},props:{index:{type:Number,default:0},title:{type:String,default:""},text:{type:String,default:""},textFieldPlaceholder:{type:String,default:""},isDataRequired:{type:Boolean,default:!1},isTextFieldMultiline:{type:Boolean,default:!1},isError:{type:Boolean,default:!1},isPrice:{type:Boolean,default:!1}},emits:["changed"],watch:{}}),P(Z=class extends n.w3{changed(e){console.log("ch",e),this.$emit("changed",e,this.$props.index)}})||Z);const $=(0,A.Z)(q,[["render",k],["__scopeId","data-v-8b7f31dc"]]);var W,O,R=$;function j(e,t,s,i,o,l){return(0,r.wg)(),(0,r.iD)("div",{class:"button-component",style:(0,w.j5)(e.style)},(0,w.zw)(e.title),5)}let z=(W=(0,n.Ei)({components:{},props:{title:{type:String,default:""},isActive:{type:Boolean,default:!0},green:{type:Boolean,default:!0},white:{type:Boolean,default:!0}},emits:[],watch:{}}),W(O=class extends n.w3{get style(){let e,t,s;return this.$props.green&&this.$props.isActive?(e="#7BAE73",t="#FFFFFF",s="#4B7E43"):this.$props.white&&this.$props.isActive?(e="#FFFFFF",t="#B4B4B4",s="#BBBBBB"):(e="#EEEEEE",t="#B4B4B4",s="#EEEEEE"),{"--bg-color":e,"--color":t,"--hover-bg-color":s}}})||O);const Y=(0,A.Z)(z,[["render",j],["__scopeId","data-v-7528e426"]]);var U,N,K=Y;let V=(U=(0,n.Ei)({components:{InputDataComponent:R,ButtonComponent:K},props:{},emits:["clicked"],watch:{}}),U(N=class extends n.w3{constructor(...e){super(...e),(0,l.Z)(this,"isConfirmButtonActive",!1),(0,l.Z)(this,"textFieldsData",new Array(4).fill("")),(0,l.Z)(this,"isFieldsError",new Array(4).fill(!1))}changed(e,t){this.textFieldsData[t]=e,0===this.textFieldsData[0].length||0===this.textFieldsData[2].length||0===this.textFieldsData[3].length?(this.textFieldsData.forEach(((e,t)=>{this.textFieldsData[t].length>0&&(this.isFieldsError[t]=!1)})),this.isConfirmButtonActive=!1):(this.isConfirmButtonActive=!0,this.isFieldsError=new Array(4).fill(!1)),console.log("data",this.textFieldsData)}clicked(){if(this.isConfirmButtonActive){let e={desc:this.textFieldsData[1],id:0,img:this.textFieldsData[2],name:this.textFieldsData[0],price:this.textFieldsData[3]};this.isFieldsError=new Array(4).fill(!1),this.textFieldsData=new Array(4).fill(""),this.isConfirmButtonActive=!1,this.$emit("clicked",e)}else this.textFieldsData.forEach(((e,t)=>{1!==t&&(0===e.length?this.isFieldsError[t]=!0:this.isFieldsError[t]=!1)}))}})||N);const X=(0,A.Z)(V,[["render",b],["__scopeId","data-v-4591b1b0"]]);var G=X,J=s.p+"img/delete.1d0ae866.svg";const Q=e=>((0,r.dD)("data-v-ad68cbc6"),e=e(),(0,r.Cn)(),e),ee=["src"],te={class:"card-details"},se={class:"card-name"},ie={class:"card-desc"},re={class:"card-price"},oe=Q((()=>(0,r._)("img",{src:J,alt:"Удалить товар",height:"16",width:"16"},null,-1)));function le(e,t,s,o,l,n){const a=(0,r.up)("ButtonWithIcon");return(0,r.wg)(),(0,r.iD)("div",{class:"product-card",id:"card",onMouseenter:t[0]||(t[0]=t=>e.isCardHovered=!0),onMouseleave:t[1]||(t[1]=t=>e.isCardHovered=!1)},[(0,r._)("img",{class:"card-img",src:e.card.img},null,8,ee),(0,r._)("div",te,[(0,r._)("div",se,(0,w.zw)(e.card.name),1),(0,r._)("div",ie,(0,w.zw)(e.card.desc),1),(0,r._)("div",re,(0,w.zw)(e.splittedPrice)+" руб. ",1)]),(0,r.Wm)(i.uT,{name:"fade"},{default:(0,r.w5)((()=>[e.isItMobile||e.isCardHovered?((0,r.wg)(),(0,r.j4)(a,{key:0,style:{position:"absolute",display:"flex",top:"0",right:"0","z-index":"2",transform:"translate(8px, -8px)"},onClicked:e.removeClicked},{default:(0,r.w5)((()=>[oe])),_:1},8,["onClicked"])):(0,r.kq)("",!0)])),_:1})],32)}function ne(e,t,s,i,o,l){return(0,r.wg)(),(0,r.iD)("div",{class:"button-with-icon",onClick:t[0]||(t[0]=(...t)=>e.clicked&&e.clicked(...t))},[(0,r.WI)(e.$slots,"default",{},void 0,!0)])}var ae,ce;let de=(ae=(0,n.Ei)({components:{},props:{},emits:["clicked"],watch:{}}),ae(ce=class extends n.w3{clicked(){this.$emit("clicked")}})||ce);const he=(0,A.Z)(de,[["render",ne],["__scopeId","data-v-4247fbcf"]]);var ue,pe,me=he;let ge=(ue=(0,n.Ei)({components:{ButtonWithIcon:me},props:{card:{type:Object,default:{}}},emits:["removeClicked"],watch:{}}),ue(pe=class extends n.w3{constructor(...e){super(...e),(0,l.Z)(this,"isCardHovered",!1),(0,l.Z)(this,"isItMobile",!1)}mounted(){let e=/Mobi/i.test(window.navigator.userAgent);this.isItMobile=!!e}removeClicked(){this.$emit("removeClicked",this.$props.card)}get splittedPrice(){return S(this.$props.card.price)}})||pe);const ve=(0,A.Z)(ge,[["render",le],["__scopeId","data-v-ad68cbc6"]]);var fe=ve;const be=e=>((0,r.dD)("data-v-063d5260"),e=e(),(0,r.Cn)(),e),we={key:0,class:"vc-scrollbar"},Ee=be((()=>(0,r._)("div",{class:"v-scrollbar"},null,-1))),ye=[Ee];function xe(e,t,s,o,l,n){return e.enabled?((0,r.wg)(),(0,r.iD)("div",we,[(0,r._)("div",{class:(0,w.C_)(["v-scrollbar-box",{"v-scrollbar-display":e.scrollbarDisplay,"v-scrollbar-interact":e.scrollbarMouseYPos,"v-hide":!e.display||!e.scrollbarIsRequired}]),ref:"scrollbarBox",onMousedown:t[0]||(t[0]=(0,i.iM)(((...t)=>e.onMouseDownScrollbarBox&&e.onMouseDownScrollbarBox(...t)),["prevent"])),onMousemove:t[1]||(t[1]=(0,i.iM)((()=>{}),["prevent"])),onWheel:t[2]||(t[2]=(0,i.iM)((()=>{}),["prevent"]))},ye,34)])):(0,r.kq)("",!0)}let Ce=0,ke=null,Fe=new Map;function _e(){for(const e of Fe.values())e();Fe.clear(),ke=null}class De{static request(e){null===ke&&(ke=requestAnimationFrame(_e));const t=Ce++;return Fe.set(t,e),t}static cancel(e){Fe.delete(e)}}class Me{constructor(e,t){this.callback=e,this.timeout=t,this.canceled=!1}setTimeout(e){this.timeout!==e&&(this.cancelImmediately(),this.timeout=e)}_timeoutFunc(){if(this.canceled)return this.requiredTimeMs=null,this.timerId=null,void(this.canceled=!1);if(this.requiredTimeMs){const e=(new Date).getTime();return clearTimeout(this.timerId),this.timerId=setTimeout((()=>this._timeoutFunc()),this.requiredTimeMs-e),void(this.requiredTimeMs=null)}this.timerId=null,this.callback()}run(){if(this.timerId){this.canceled=!1;const e=(new Date).getTime();this.requiredTimeMs=e+this.timeout}else this.timerId=setTimeout((()=>this._timeoutFunc()),this.timeout)}cancel(){this.timerId&&(this.canceled=!0)}cancelImmediately(){this.timerId&&(clearTimeout(this.timerId),this.requiredTimeMs=null,this.timerId=null,this.canceled=!1)}}var Se,Be;const Ie=n.Ei;let Te=(Se=Ie({components:{},props:{display:{type:Boolean,default:!0},alwaysDisplay:{type:Boolean,default:!1},scrollElement:HTMLElement,reactiveUpdateParams:0},watch:{reactiveUpdateParams(){this.onScrollBox()},scrollElement(e,t){this.enabled&&this.scrollElement&&(t&&this.freeElement(t),this.initializeElement())}}}),Se(Be=class extends n.w3{constructor(...e){super(...e),(0,l.Z)(this,"enabled",!0),(0,l.Z)(this,"bodyMode",!0),(0,l.Z)(this,"scrollbarIsRequired",!1),(0,l.Z)(this,"scrollbarDisplay",!1),(0,l.Z)(this,"scrollbarHeight",80),(0,l.Z)(this,"scrollbarMinHeight",80),(0,l.Z)(this,"scrollbarTopOffset",0),(0,l.Z)(this,"scrollbarMouseYPos",null),(0,l.Z)(this,"lastScrollTop",-1),(0,l.Z)(this,"lastClientHeight",-1),(0,l.Z)(this,"lastScrollHeight",-1),(0,l.Z)(this,"lastAnimationFrame",null),(0,l.Z)(this,"timeoutResetterActivateScrollbar",new Me((()=>this.scrollbarDisplay=!1),1e3))}updateParamsInTicks(){this.lastAnimationFrame=requestAnimationFrame((()=>{this.updateScrollbarParams(),this.updateParamsInTicks()}))}beforeMount(){-1===navigator.platform.indexOf("Win")&&-1===navigator.platform.indexOf("Mac")&&(this.enabled=!1)}async mounted(){this.enabled&&(this.scrollElement&&this.initializeElement(),this.$refs.scrollbarBox.style.height=this.scrollbarHeight+"px")}initializeElement(){this.scrollElement.classList.add("vc-scrollbar-disable-default"),this.bodyMode=this.scrollElement===document.documentElement,this.alwaysDisplay?this.scrollbarDisplay=!0:(this.scrollbarDisplay=!1,this.scrollElement.addEventListener("mouseenter",this.onMouseEnterBox),this.scrollElement.addEventListener("mousemove",this.onMouseMoveElement),this.activateScrollbar()),this.updateParamsInTicks()}freeElement(e){e.classList.remove("vc-scrollbar-disable-default"),window.removeEventListener("mousemove",this.onMouseMoveWindowScrollbarChange,!1),window.removeEventListener("mouseup",this.onMouseUpWindowScrollbarChange,!1),e.removeEventListener("mouseenter",this.onMouseEnterBox),e.removeEventListener("mousemove",this.onMouseMoveElement),this.lastAnimationFrame&&cancelAnimationFrame(this.lastAnimationFrame),this.timeoutResetterActivateScrollbar.cancel()}beforeUnmount(){this.enabled&&(this.scrollElement&&this.freeElement(this.scrollElement),De.cancel(this.animationFrameIdHeightChange),De.cancel(this.animationFrameIdScrollbarTopOffset))}onMouseDownScrollbarBox(e){this.scrollbarMouseYPos=e.offsetY,window.addEventListener("mousemove",this.onMouseMoveWindowScrollbarChange,!1),window.addEventListener("mouseup",this.onMouseUpWindowScrollbarChange,!1)}onMouseUpWindowScrollbarChange(){this.scrollbarMouseYPos=null,window.removeEventListener("mousemove",this.onMouseMoveWindowScrollbarChange,!1),window.removeEventListener("mouseup",this.onMouseUpWindowScrollbarChange,!1)}onMouseMoveWindowScrollbarChange(e){this.scrollElement.scrollTo({top:(this.scrollElement.scrollHeight-this.scrollElement.clientHeight)*(e.clientY-(this.scrollElement.getBoundingClientRect().y+(this.bodyMode?this.scrollElement.scrollTop:0))-this.scrollbarMouseYPos)/(this.scrollElement.clientHeight-this.scrollbarHeight)})}onMouseMoveElement(e){Math.abs(e.offsetX-this.scrollElement.getBoundingClientRect().width)<32&&this.activateScrollbar()}onScrollBox(){this.scrollbarMouseYPos||this.updateScrollbarParams()}updateScrollbarParams(){if(this.lastClientHeight==this.scrollElement.clientHeight&&this.lastScrollHeight==this.scrollElement.scrollHeight&&this.lastScrollTop==this.scrollElement.scrollTop)return;if(this.lastClientHeight=this.scrollElement.clientHeight,this.lastScrollHeight=this.scrollElement.scrollHeight,this.lastScrollTop=this.scrollElement.scrollTop,this.scrollElement.scrollHeight<=this.scrollElement.clientHeight)return void(this.scrollbarIsRequired=!1);this.scrollbarIsRequired=!0;let e=this.scrollElement.clientHeight-(this.scrollElement.scrollHeight-this.scrollElement.clientHeight);e<this.scrollbarMinHeight&&(e=this.scrollbarMinHeight),e!==this.scrollbarHeight&&(this.scrollbarHeight=e,De.cancel(this.animationFrameIdHeightChange),this.animationFrameIdHeightChange=De.request((()=>{this.$refs.scrollbarBox.style.height=e+"px"})));let t=this.scrollElement.scrollHeight,s=this.scrollElement.scrollTop,i=this.scrollElement.clientHeight-this.scrollbarHeight,r=s/(t-this.scrollElement.clientHeight),o=r*i;o!==this.scrollbarTopOffset&&(this.scrollbarTopOffset=o,De.cancel(this.animationFrameIdScrollbarTopOffset),this.animationFrameIdScrollbarTopOffset=De.request((()=>{this.$refs.scrollbarBox.style.transform=`translateY(${o}px)`}))),this.alwaysDisplay||this.activateScrollbar()}onMouseEnterBox(){this.activateScrollbar()}activateScrollbar(){this.scrollElement.scrollHeight<=this.scrollElement.clientHeight||(this.scrollbarDisplay||(this.scrollbarDisplay=!0),this.timeoutResetterActivateScrollbar.run())}})||Be);const Ae=(0,A.Z)(Te,[["render",xe],["__scopeId","data-v-063d5260"]]);var He=Ae,Pe=s.p+"img/chevron.8fe6b11c.svg";const Ze=e=>((0,r.dD)("data-v-6abad266"),e=e(),(0,r.Cn)(),e),Le={class:"sort-select-component"},qe={class:"main-button",id:"main-button"},$e=Ze((()=>(0,r._)("div",{class:"chevron-container"},[(0,r._)("img",{src:Pe,id:"chevron-icon",alt:"Удалить товар",height:"8",width:"8"})],-1))),We={key:0,class:"sub-block",id:"sub-block"},Oe=["checked","onChange"],Re=Ze((()=>(0,r._)("span",{class:"checkbox-custom"},null,-1))),je={class:"label"};function ze(e,t,s,o,l,n){return(0,r.wg)(),(0,r.iD)("div",Le,[(0,r._)("div",qe,[(0,r.Uk)((0,w.zw)(e.currentTitle)+" ",1),$e]),(0,r.Wm)(i.uT,{name:"fade"},{default:(0,r.w5)((()=>[e.state?((0,r.wg)(),(0,r.iD)("div",We,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.itemsList,((t,s)=>((0,r.wg)(),(0,r.iD)("label",{class:"item",key:t},[(0,r._)("input",{type:"checkbox",class:"checkbox-original",checked:e.itemsStates[s],onChange:t=>e.change(t,s)},null,40,Oe),Re,(0,r._)("div",je,(0,w.zw)(t),1)])))),128))])):(0,r.kq)("",!0)])),_:1})])}var Ye,Ue;let Ne=(Ye=(0,n.Ei)({components:{},props:{title:{type:String,default:""},state:{type:Boolean,default:!1},itemsList:{type:Array,default:[]},itemsStates:{type:Array,default:[]}},emits:["change-sort","click-outside"],watch:{state(e){let t=document.getElementById("chevron-icon");t.style.transform=e?"rotate(180deg)":"rotate(0deg)"}}}),Ye(Ue=class extends n.w3{constructor(...e){super(...e),(0,l.Z)(this,"state",!1),(0,l.Z)(this,"checkList",[!0,...new Array(this.$props.itemsList.length-1).fill(!1)])}created(){window.addEventListener("mouseup",this.checkIsClickOut)}mounted(){this.checkList=Array(this.$props.itemsList.length).fill(!1)}beforeUnmount(){window.removeEventListener("mouseup",this.checkIsClickOut)}get currentTitle(){let e;return this.$props.itemsStates.forEach(((t,s)=>{t&&(e=this.$props.itemsList[s])})),e}changeState(){this.state=!this.state}change(e,t){this.state=!1,this.checkList[t]!==e.target.checked&&(this.checkList=new Array(this.$props.itemsList.length).fill(!1),this.checkList[t]=e.target.checked,this.$emit("change-sort",this.checkList))}checkIsClickOut(e){let t=document.getElementById("sub-block");if(this.state){if(null!==t){let s=t.getBoundingClientRect().left,i=t.getBoundingClientRect().right,r=t.getBoundingClientRect().top,o=t.getBoundingClientRect().bottom,l=e.x,n=e.y;l>=s&&l<=i&&n<=o&&n>=r||(this.state=!1)}}else{t=document.getElementById("main-button");let s=t?.getBoundingClientRect().left,i=t?.getBoundingClientRect().right,r=t?.getBoundingClientRect().top,o=t?.getBoundingClientRect().bottom,l=e.x,n=e.y;l>=s&&l<=i&&n<=o&&n>=r&&(this.state=!0)}}})||Ue);const Ke=(0,A.Z)(Ne,[["render",ze],["__scopeId","data-v-6abad266"]]);var Ve=Ke;const Xe="productdb",Ge="products",Je=1;let Qe;class et{async getDb(){return new Promise(((e,t)=>{if(Qe)return e(Qe);const s=window.indexedDB.open(Xe,Je);s.onerror=e=>{console.log("Error opening db",e),t("Error")},s.onsuccess=t=>{Qe=t.target.result,e(Qe)},s.onupgradeneeded=e=>{let t=e.target.result;t.createObjectStore(Ge,{autoIncrement:!0,keyPath:"id"})}}))}async removeItem(e){const t=await this.getDb();return new Promise((s=>{const i=t.transaction([Ge],"readwrite");i.oncomplete=()=>{s()};const r=i.objectStore(Ge);r.delete(e.id)}))}async getAll(){let e=await this.getDb();return new Promise((t=>{let s=e.transaction([Ge],"readonly");s.oncomplete=()=>{t(r)};const i=s.objectStore(Ge),r=[];i.openCursor().onsuccess=e=>{const t=e.target.result;t&&(r.push(t.value),t.continue())}}))}async addItem(e){console.log("i",e);let t=await this.getDb(),s=t.transaction(["products"],"readwrite"),i=s.objectStore("products");i.add(e),s.oncomplete=()=>{console.log("stored note!")},s.onerror=e=>{console.log("error storing note ",e.target.errorCode)}}}var tt,st;let it=(tt=(0,n.Ei)({components:{AddNewProductComponent:G,ProductCard:fe,ScrollbarComponent:He,SortSelectComponent:Ve},props:{},emits:[],watch:{}}),tt(st=class extends n.w3{constructor(...e){super(...e),(0,l.Z)(this,"scroll_wrapper_ref",null),(0,l.Z)(this,"db",new et),(0,l.Z)(this,"sortTypes",["По умолчанию","По имени","Дешевле","Дороже"]),(0,l.Z)(this,"sortStates",[!0,!1,!1,!1]),(0,l.Z)(this,"products",null)}async mounted(){this.products=await this.db.getAll()}async addNewCard(e){const t=e;t.id=(new Date).getTime(),await this.db.addItem(t),this.products=await this.db.getAll(),this.sort()}async removeCard(e){await this.db.removeItem(e),this.products=await this.db.getAll(),this.sort()}changeSortType(e){this.sortStates=e,this.sort()}sort(){this.sortStates.forEach(((e,t)=>{if(e)switch(t){case 0:this.products.sort(((e,t)=>e.id-t.id));break;case 1:this.products=this.products.sort((function(e,t){return e.name.localeCompare(t.name)}));break;case 2:this.products.sort(((e,t)=>parseInt(e.price.replace(/ /g,""))-parseInt(t.price.replace(/ /g,""))));break;case 3:this.products.sort(((e,t)=>parseInt(t.price.replace(/ /g,""))-parseInt(e.price.replace(/ /g,""))));break}}))}})||st);const rt=(0,A.Z)(it,[["render",v],["__scopeId","data-v-2a5f2866"]]);var ot=rt,lt=s.p+"img/ida-project-logo.cfe3f0a9.png";const nt=e=>((0,r.dD)("data-v-0aa3e550"),e=e(),(0,r.Cn)(),e),at={class:"preloader"},ct=nt((()=>(0,r._)("div",{class:"preloader-content"},[(0,r._)("div",{class:"logo"},[(0,r._)("img",{src:lt,id:"chevron-icon",alt:"Удалить товар",height:"44",width:"90"})]),(0,r._)("div",{class:"loading"},[(0,r._)("span"),(0,r._)("span"),(0,r._)("span")])],-1))),dt=[ct];function ht(e,t,s,i,o,l){return(0,r.wg)(),(0,r.iD)("div",at,dt)}var ut,pt;let mt=(ut=(0,n.Ei)({components:{},props:{},emits:[],watch:{}}),ut(pt=class extends n.w3{})||pt);const gt=(0,A.Z)(mt,[["render",ht],["__scopeId","data-v-0aa3e550"]]);var vt,ft,bt=gt;let wt=(vt=(0,n.Ei)({components:{MainView:ot,Preloader:bt},props:{},emits:[],watch:{}}),vt(ft=class extends n.w3{constructor(...e){super(...e),(0,l.Z)(this,"isLoaded",!1)}mounted(){setTimeout((()=>{this.isLoaded=!0}),1500)}})||ft);const Et=(0,A.Z)(wt,[["render",o]]);var yt=Et,xt=s(5431);(0,xt.z)("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var Ct=s(678);const kt=[{path:"/",name:"home",component:ot}],Ft=(0,Ct.p7)({history:(0,Ct.r5)(),routes:kt});var _t=Ft;(0,i.ri)(yt).use(_t).mount("#app")}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,s),o.exports}s.m=e,function(){var e=[];s.O=function(t,i,r,o){if(!i){var l=1/0;for(d=0;d<e.length;d++){i=e[d][0],r=e[d][1],o=e[d][2];for(var n=!0,a=0;a<i.length;a++)(!1&o||l>=o)&&Object.keys(s.O).every((function(e){return s.O[e](i[a])}))?i.splice(a--,1):(n=!1,o<l&&(l=o));if(n){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[i,r,o]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p=""}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,o,l=i[0],n=i[1],a=i[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(a)var d=a(s)}for(t&&t(i);c<l.length;c++)o=l[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},i=self["webpackChunkidaproject_test"]=self["webpackChunkidaproject_test"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(821)}));i=s.O(i)})();
//# sourceMappingURL=app.42c57099.js.map